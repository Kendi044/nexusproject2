{% extends 'base.html' %}

{% block content %}
<style>
    .tree { text-align: center; padding: 20px; color: var(--primary); }
    .node-group { display: flex; justify-content: center; gap: 20px; margin-bottom: 40px; }
    .member-node {
        width: 70px; height: 70px;
        border-radius: 50%;
        background: var(--accent);
        color: white;
        display: flex; align-items: center; justify-content: center;
        font-size: 0.7rem; font-weight: bold;
        box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        flex-direction: column;
    }
    .empty-node { background: #dfe6e9; color: #b2bec3; border: 2px dashed #b2bec3; }
    .line { width: 2px; height: 30px; background: #ccc; margin: 0 auto; }
</style>

<div class="profile-card" style="max-width: 500px; margin: 50px auto; padding: 30px; background: white; border-radius: 15px; box-shadow: 0 5px 15px rgba(0,0,0,0.1);">
    <h2 style="text-align: center; color: #1a252f;">Member Profile</h2>
    <hr>
    
    <div style="margin: 20px 0;">
        <p><strong>Full Name:</strong> {{ profile.full_name }}</p>
        <p><strong>Username:</strong> {{ profile.user.username }}</p>
        
        <div style="background: #e8f6ef; padding: 15px; border-radius: 8px; margin-top: 15px;">
            <p style="margin: 0; color: #27ae60; font-weight: bold;">Available Balance</p>
            <h1 style="margin: 5px 0; color: #2c3e50;">${{ user.memberprofile.wallet }}</h1>
        </div>
    </div>

    <div style="margin: 20px 0; padding: 15px; border: 1px dashed #f39c12; border-radius: 8px;">
        <p style="margin-bottom: 5px; font-weight: bold;">Your Referral Link:</p>
        <code style="display: block; background: #fff3cd; padding: 8px;">
            https://nfgmatrix.com/register/?ref={{ profile.ref_id }}
        </code>
    </div>
    <div class="profile-wrapper" style="padding: 20px; max-width: 600px; margin: auto;">
    
    <div class="card" style="margin-bottom: 30px; padding: 20px; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
        <h4>Update Wallet Address</h4>
        <form method="POST">
            {% csrf_token %}
            <input type="text" name="wallet_address" class="form-control" 
                   value="{{ profile.wallet_address }}" placeholder="Enter New USDT/BTC Address" 
                   style="margin-bottom: 10px; width: 100%; padding: 8px;">
            <button type="submit" name="update_wallet" class="btn btn-primary">Save Wallet</button>
        </form>
    </div>

    <div class="card" style="padding: 20px; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
        <h4>Security</h4>
        <form method="POST">
            {% csrf_token %}
            <input type="text" name="Password" class="form-control" 
                   value="{{ profile.update_wallet }}" placeholder="Enter New Password" 
                   style="margin-bottom: 10px; width: 100%; padding: 8px;">
            <button type="submit" name="change_password" class="btn btn-warning">Update Password</button>
        </form>
    </div>
</div>
    <form action="{% url 'logout' %}" method="post">
        {% csrf_token %}
        <button type="submit" style="width: 100%; padding: 12px; background: #e74c3c; color: white; border: none; border-radius: 5px; cursor: pointer; font-weight: bold;">
            Logout Account
        </button>
    </form>
</div>
{% endblock %}